{% extends "base.html" %}
{% set title="Awards" %}

{% block content %}
<h1 class="mb-4 brand-gradient-text">Recognitions</h1>

<style>
  /* --- gradient themes --- */
  :root {
    --hackathon-1:#f59e0b; --hackathon-2:#a855f7;
    --press-1:#2563eb; --press-2:#3b82f6;
    --lead-1:#facc15; --lead-2:#f43f5e;
    --acad-1:#0ea5e9; --acad-2:#10b981;
  }

  .award-icon svg {
    width:18px;height:18px;
    transition:transform .15s ease;
  }
  .timeline-dot {
    position:absolute;left:0;top:.6rem;
    width:18px;height:18px;border-radius:50%;
    box-shadow:0 0 0 6px var(--ring);
  }

  /* type-based gradients */
  .type-hackathon .award-icon svg,
  .type-hackathon .timeline-dot {
    background:linear-gradient(135deg,var(--hackathon-1),var(--hackathon-2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .type-hackathon .timeline-dot {
    background:linear-gradient(135deg,var(--hackathon-1),var(--hackathon-2));
  }

  .type-press .award-icon svg,
  .type-press .timeline-dot {
    background:linear-gradient(135deg,var(--press-1),var(--press-2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .type-press .timeline-dot {
    background:linear-gradient(135deg,var(--press-1),var(--press-2));
  }

  .type-leadership .award-icon svg,
  .type-leadership .timeline-dot {
    background:linear-gradient(135deg,var(--lead-1),var(--lead-2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .type-leadership .timeline-dot {
    background:linear-gradient(135deg,var(--lead-1),var(--lead-2));
  }

  .type-academic .award-icon svg,
  .type-academic .timeline-dot {
    background:linear-gradient(135deg,var(--acad-1),var(--acad-2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .type-academic .timeline-dot {
    background:linear-gradient(135deg,var(--acad-1),var(--acad-2));
  }

  /* default (brand blue) */
  .type-default .award-icon svg,
  .type-default .timeline-dot {
    background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .type-default .timeline-dot {
    background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
  }

  .press-card-link{display:block;text-decoration:none;color:inherit;transition:transform .15s ease,box-shadow .15s ease;}
  .press-card-link:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.08);}
  .press-clickme{font-size:.75rem;color:var(--brand-2);font-weight:600;margin-left:.35rem;opacity:.85;}
</style>

<div class="timeline">
  {% set current_section = None %}
  {% for a in awards|sort(attribute="date", reverse=True) %}

    {# categorize type for color selection #}
    {% if "Hack" in (a.title or "") %}
      {% set card_class = "type-hackathon" %}
    {% elif "Woodstock" in (a.organization or "") %}
      {% set card_class = "type-press" %}
    {% elif "President" in (a.title or "") %}
      {% set card_class = "type-leadership" %}
    {% elif "College Board" in (a.organization or "") %}
      {% set card_class = "type-academic" %}
    {% else %}
      {% set card_class = "type-default" %}
    {% endif %}

    {# month/year logic #}
    {% set date_str = (a.date|string) if a.date else "" %}
    {% set parts = date_str.split() %}
    {% set month_raw = parts[0] if parts|length > 1 else "" %}
    {% set year = parts[-1] if parts else "" %}
    {% set month_map = {
      'Jan':'January','Feb':'February','Mar':'March','Apr':'April','May':'May','Jun':'June',
      'Jul':'July','Aug':'August','Sep':'September','Sept':'September','Oct':'October',
      'Nov':'November','Dec':'December'
    } %}
    {% set month_full = month_map.get(month_raw, month_raw) %}
    {% set display_date = (month_full ~ ' ' ~ year) if (month_full and year) else (year or date_str) %}
    {% set section_label = month_full if month_full else year %}
    {% if section_label and section_label != current_section %}
      <div class="timeline-year sticky-top bg-year">{{ section_label }}</div>
      {% set current_section = section_label %}
    {% endif %}

    <div class="timeline-item reveal {{ card_class }}">
      <div class="timeline-dot"></div>

      <div class="timeline-card shadow-sm rounded-4 p-4">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
          <div class="d-flex align-items-center gap-2">
            <span class="award-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2 15 8l7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1 3-6z"/>
              </svg>
            </span>
            <h5 class="mb-0">{{ a.title }}</h5>
          </div>
          <span class="badge rounded-pill text-bg-light border">{{ display_date }}</span>
        </div>

        <!-- Organization -->
        <div class="text-muted small mt-2">
          {{ a.organization }}
        </div>

        {% if a.description %}
          <p class="mb-2 mt-2">{{ a.description }}</p>
        {% endif %}

        {# --- Woodstock Press Card --- #}
        {% if "Woodstock Independent" in (a.organization or "") %}
        <div class="mt-3">
          <a href="https://www.thewoodstockindependent.com/2025/04/whs-students-picked-for-google-showcase/"
             target="_blank" rel="noopener" class="press-card-link">
            <div class="card press-card shadow-sm border-0 rounded-4 text-start" style="max-width:320px;">
              <div class="card-body py-3 px-4 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                     class="bi bi-newspaper me-2 text-primary" viewBox="0 0 16 16">
                  <path d="M0 2a2 2 0 0 1 2-2h11a1 1 0 0 1 1 1v13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm3 1v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3H3Z"/>
                  <path d="M8 5h3v1H8V5ZM8 7h3v1H8V7ZM8 9h3v1H8V9ZM3 5h4v5H3V5Z"/>
                </svg>
                <div>
                  <div class="fw-semibold small text-uppercase text-muted">Featured in</div>
                  <div class="fw-semibold text-decoration-none press-link d-inline-flex align-items-center">
                    The Woodstock Independent
                    <span class="press-clickme">→ Click me</span>
                  </div>
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endif %}

        {# --- Hack for the World Card --- #}
        {% if "Hack for the World" in (a.title or a.organization or a.description) %}
        <div class="mt-3">
          <a href="https://hackforthe.world" target="_blank" rel="noopener" class="press-card-link">
            <div class="card press-card shadow-sm border-0 rounded-4 text-start" style="max-width:400px;">
              <div class="card-body py-2 px-3 d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                     class="bi bi-globe me-2 text-primary" viewBox="0 0 16 16">
                  <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8Zm1.5 0a6.5 6.5 0 0 1 6-6.47V3.5a.5.5 0 0 0 .5.5h.5v1h-1A.5.5 0 0 0 7 5.5V6H6v1h1v1H6v1h1v1H6v1h1v.5a.5.5 0 0 0 .5.5h.5v1.97A6.5 6.5 0 0 1 1.5 8Z"/>
                </svg>
                <div>
                  <div class="fw-semibold small text-uppercase text-muted">Learn more</div>
                  <div class="fw-semibold text-decoration-none press-link d-inline-flex align-items-center">
                    Hack for the World (Naperville North Hackathon)
                    <span class="press-clickme">→ Click me</span>
                  </div>
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>

<script>
  const io = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('reveal-in');
        io.unobserve(e.target);
      }
    });
  },{threshold:0.12});
  document.querySelectorAll('.timeline-item.reveal').forEach(el=>io.observe(el));
</script>
{% endblock %}
